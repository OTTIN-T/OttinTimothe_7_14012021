(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c1940f5"],{1559:function(e,t,r){"use strict";r("5eab")},"32c1":function(e,t,r){"use strict";r("bfe6")},"5eab":function(e,t,r){},"6a82":function(e,t,r){"use strict";r("856e")},"856e":function(e,t,r){},bb51:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),o={id:"home-page"},s={id:"intro-home"},i=Object(n["g"])("h1",{id:"title-home"},"Fil d'actualité",-1),a=Object(n["g"])("p",{id:"text-home"},"Vous aussi partagez vos idées!",-1),c=Object(n["f"])(" Postez ! "),u=Object(n["g"])("i",{class:"gg-airplane"},null,-1);function d(e,t,r,d,p,l){var h=Object(n["v"])("NavHome"),m=Object(n["v"])("ButtonAdmin"),b=Object(n["v"])("router-link"),g=Object(n["v"])("Posts"),f=Object(n["v"])("Footer");return Object(n["p"])(),Object(n["d"])(n["a"],null,[Object(n["g"])(h),Object(n["g"])("main",o,[Object(n["g"])("section",s,[i,Object(n["g"])(m),a,Object(n["g"])(b,{to:"/post/create",id:"create-post-btn",title:"Bouton pour poster"},{default:Object(n["B"])((function(){return[c,u]})),_:1})]),Object(n["g"])(g)]),Object(n["g"])(f)],64)}r("b0c0"),r("9911");var p={id:"posts"},l=Object(n["g"])("h2",{class:"title-posts"},"Les derniers messages",-1);function h(e,t,r,o,s,i){var a=Object(n["v"])("ButtonReport"),c=Object(n["v"])("ButtonLike"),u=Object(n["v"])("ButtonDislike"),d=Object(n["v"])("RouterComment"),h=Object(n["v"])("Post"),m=Object(n["v"])("router-view");return Object(n["p"])(),Object(n["d"])("section",p,[l,(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["t"])(s.posts,(function(e,t){return Object(n["p"])(),Object(n["d"])(h,{key:e.id,index:t,title:e.title,id:e.id,userName:e.User.name,message:e.message,link:e.link,like:e.like,comment:e.Comments.length,createdAt:e.createdAt,updatedAt:e.updatedAt,UserId:e.UserId},{default:Object(n["B"])((function(){return[s.userId!=e.UserId&&!1===s.isAdmin?(Object(n["p"])(),Object(n["d"])(a,{key:0,id:e.id,userId:s.userId,reportMessage:e.reportMessage,onReport:function(r){return i.reportPost(e.id,s.userId,t)}},null,8,["id","userId","reportMessage","onReport"])):Object(n["e"])("",!0),Object(n["g"])(c,{id:e.id,userId:s.userId,likeMessage:s.likeMessage,onLike:function(r){return i.likePost(e.id,s.userId,t)}},null,8,["id","userId","likeMessage","onLike"]),Object(n["g"])(u,{id:e.id,userId:s.userId,dislikeMessage:s.dislikeMessage,onDislike:function(r){return i.dislikePost(e.id,s.userId,t)}},null,8,["id","userId","dislikeMessage","onDislike"]),Object(n["g"])(d,{id:e.id},null,8,["id"])]})),_:2},1032,["index","title","id","userName","message","link","like","comment","createdAt","updatedAt","UserId"])})),128)),Object(n["g"])(m)])}r("99af"),r("d3b7"),r("96cf");var m=r("1da1"),b=r("9c93"),g=r("e203"),f=r("f383"),k=r("c7bb"),j=r("0b43"),O={name:"Posts",components:{Post:b["a"],RouterComment:g["a"],ButtonLike:f["a"],ButtonDislike:k["a"],ButtonReport:j["a"]},data:function(){return{posts:[],index:"",like:"",token:"",userId:"",isAdmin:"",reportMessage:"",likeMessage:"",dislikeMessage:"",error:"",userReported:""}},created:function(){var e=this,t=localStorage.getItem("user"),r=JSON.parse(t);if(null===r)return this.$router.push({path:"/"});this.token=r.token,this.userId=r.userId,this.isAdmin=r.isAdmin,fetch("https://localhost:3000/groupomania/post/",{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(this.token)})}).then((function(e){return e.json()})).then((function(t){if(t.error)return e.$router.push({path:"/"});e.posts=t.post})).catch((function(e){console.log(e)}))},methods:{reportPost:function(e,t,r){var n=this;if(null===this.token)return this.$router.push({path:"/"});fetch("https://localhost:3000/groupomania/report/post/".concat(e,"/").concat(t,"/"),{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(this.token)})}).then(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:o=e.sent,o.message&&(n.posts[r].reportMessage=o.message),n.error=o.error;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},likePost:function(e,t,r){var n=this;if(null===this.token)return this.$router.push({path:"/"});fetch("https://localhost:3000/groupomania/likePost/like/".concat(e,"/").concat(t),{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(this.token)})}).then(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:o=e.sent,o.error||(n.posts[r].like=o.count),n.error=o.error;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},dislikePost:function(e,t,r){var n=this;if(null===this.token)return this.$router.push({path:"/"});fetch("https://localhost:3000/groupomania/likePost/dislike/".concat(e,"/").concat(t),{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(this.token)})}).then(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:o=e.sent,o.error||(n.posts[r].like=o.count),n.error=o.error;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}}};r("32c1");O.render=h;var v=O,I=r("f85e"),A={key:0,id:"admin-div"},w=Object(n["g"])("i",{class:"gg-crown"},null,-1),B=Object(n["f"])("Page Admin");function P(e,t,r,o,s,i){var a=Object(n["v"])("router-link"),c=Object(n["v"])("router-view");return Object(n["p"])(),Object(n["d"])(n["a"],null,[!0===s.isAdmin?(Object(n["p"])(),Object(n["d"])("div",A,[w,Object(n["g"])(a,{id:"admin-btn",to:{name:"AdminPage",params:{id:s.userId}},title:"Lien vers la page admin"},{default:Object(n["B"])((function(){return[B]})),_:1},8,["to"])])):Object(n["e"])("",!0),Object(n["g"])(c)],64)}var M={name:"ButtonAdmin",data:function(){return{token:"",userId:"",isAdmin:""}},created:function(){var e=localStorage.getItem("user"),t=JSON.parse(e);if(null===t||!1===t.isAdmin)return this.$router.push({path:"/home"});this.token=t.token,this.userId=t.userId,this.isAdmin=t.isAdmin}};r("1559");M.render=P;var R=M,x=r("fd2d"),H={name:"Home",components:{Posts:v,NavHome:I["a"],ButtonAdmin:R,Footer:x["a"]},created:function(){var e=localStorage.getItem("user"),t=JSON.parse(e);if(null===t)return this.$router.push({path:"/"})}};r("6a82");H.render=d;t["default"]=H},bfe6:function(e,t,r){}}]);
//# sourceMappingURL=chunk-1c1940f5.b26f676b.js.map