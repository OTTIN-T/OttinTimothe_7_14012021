(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72a1f45d"],{"0db7":function(e,t,n){},2785:function(e,t,n){"use strict";n("8227")},"5ccc":function(e,t,n){"use strict";n("84ec")},"64ac":function(e,t,n){"use strict";var r=n("7a23"),o={id:"delete-div"},i=Object(r["g"])("i",{class:"gg-trash"},null,-1);function c(e,t,n,c,a,u){return Object(r["p"])(),Object(r["d"])("div",o,[i,Object(r["g"])("button",{id:"delete-btn",onClick:t[1]||(t[1]=function(){return u.deleteButton&&u.deleteButton.apply(u,arguments)})},Object(r["x"])(n.action),1)])}var a={name:"ButtonDelete",props:["action"],methods:{deleteButton:function(){this.$emit("deleteButton")}}};n("5ccc");a.render=c;t["a"]=a},8227:function(e,t,n){},"84ec":function(e,t,n){},9865:function(e,t,n){"use strict";n("9b5e")},"9b5e":function(e,t,n){},a55b:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={id:"admin-page"},i=Object(r["g"])("div",{id:"intro-admin"},[Object(r["g"])("h2",{id:"title-admin"},"Contenu signalé:"),Object(r["g"])("p",{id:"text-admin"}," Retrouver tous les signalements fait par les utilisateurs. ")],-1),c={key:0},a=Object(r["g"])("h3",{class:"title-text"},"Contenu signalé:",-1),u={class:"text"},s=Object(r["f"])(" Post "),l=Object(r["f"])(" Utilisateur signalé: "),d=Object(r["f"])(" Signalé par l'utilisateur: "),p={key:1},b=Object(r["g"])("h3",{class:"title-text"},"Contenu signalé:",-1),f={class:"text"},j=Object(r["f"])(" Sur le post "),O=Object(r["f"])(" Utilisateur signalé: "),m=Object(r["f"])(" Signalé par l'utilisateur: ");function g(e,t,n,g,h,v){var I=Object(r["v"])("NavHome"),k=Object(r["v"])("router-link"),B=Object(r["v"])("ButtonDelete"),x=Object(r["v"])("Footer");return Object(r["p"])(),Object(r["d"])(r["a"],null,[Object(r["g"])(I),Object(r["g"])("main",null,[Object(r["g"])("section",o,[i,(Object(r["p"])(!0),Object(r["d"])(r["a"],null,Object(r["t"])(h.reports,(function(e){return Object(r["p"])(),Object(r["d"])("div",{key:e,id:"user-report"},[e.postId>=1&&0===e.commentId?(Object(r["p"])(),Object(r["d"])("div",c,[a,Object(r["g"])("p",u,Object(r["x"])(e.message),1),s,Object(r["g"])(k,{class:"nav-user",to:{name:"PostUnique",params:{id:e.postId}}},{default:Object(r["B"])((function(){return[Object(r["f"])(" n°"+Object(r["x"])(e.postId),1)]})),_:2},1032,["to"]),Object(r["g"])("p",null,[l,Object(r["g"])(k,{class:"nav-user",to:{name:"ProfilePage",params:{id:e.userReportedId}},title:"Lien vers le profil signalé"},{default:Object(r["B"])((function(){return[Object(r["f"])("n°"+Object(r["x"])(e.userReportedId),1)]})),_:2},1032,["to"])]),Object(r["g"])("p",null,[d,Object(r["g"])(k,{class:"nav-user",to:{name:"ProfilePage",params:{id:e.userReporterId}},title:"Lien vers le profil signalant"},{default:Object(r["B"])((function(){return[Object(r["f"])("n°"+Object(r["x"])(e.userReporterId),1)]})),_:2},1032,["to"])])])):e.commentId>=1?(Object(r["p"])(),Object(r["d"])("div",p,[b,Object(r["g"])("p",f,Object(r["x"])(e.message),1),Object(r["g"])("p",null,"Commentaire n°: "+Object(r["x"])(e.commentId),1),j,Object(r["g"])(k,{class:"nav-user",to:{name:"PostUnique",params:{id:e.postId}}},{default:Object(r["B"])((function(){return[Object(r["f"])(" n°"+Object(r["x"])(e.postId),1)]})),_:2},1032,["to"]),Object(r["g"])("p",null,[O,Object(r["g"])(k,{class:"nav-user",to:{name:"ProfilePage",params:{id:e.userReportedId}},title:"Lien vers le profil signalé"},{default:Object(r["B"])((function(){return[Object(r["f"])("n°"+Object(r["x"])(e.userReportedId),1)]})),_:2},1032,["to"])]),Object(r["g"])("p",null,[m,Object(r["g"])(k,{class:"nav-user",to:{name:"ProfilePage",params:{id:e.userReporterId}},title:"Lien vers le profil signalant"},{default:Object(r["B"])((function(){return[Object(r["f"])("n°"+Object(r["x"])(e.userReporterId),1)]})),_:2},1032,["to"])])])):Object(r["e"])("",!0),!0===h.isAdmin?(Object(r["p"])(),Object(r["d"])(B,{key:2,title:"Bouton pour annuler un report",onDeleteButton:function(t){return v.cancelReport(e.userReportedId,e.userReporterId,e.postId,e.commentId)},action:h.action},null,8,["onDeleteButton","action"])):Object(r["e"])("",!0),Object(r["g"])("p",null,Object(r["x"])(h.error),1)])})),128))])]),Object(r["g"])(x)],64)}n("d3b7"),n("96cf");var h=n("1da1"),v=n("f85e"),I=n("64ac"),k=n("fd2d"),B={name:"AdminPage",components:{NavHome:v["a"],ButtonDelete:I["a"],Footer:k["a"]},data:function(){return{token:"",userId:"",isAdmin:"",error:"",action:"ANNULER",reports:[]}},created:function(){var e=this,t=localStorage.getItem("user"),n=JSON.parse(t);if(null===n||!1===n.isAdmin)return this.$router.push({path:"/"});this.token=n.token,this.userId=n.userId,this.isAdmin=n.isAdmin,fetch("https://localhost:3000/groupomania/report/admin/"+this.$route.params.id,{headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)})}).then((function(e){return e.json()})).then((function(t){if(!t.error)return e.reports=t.report;e.$router.push({path:"/home"})})).catch((function(e){console.log(e)}))},methods:{cancelReport:function(e,t,n,r){var o=this;if(null===this.token)return this.$router.push({path:"/"});if(this.$route.params.id!=this.userId&&1!=this.isAdmin)return this.$router.push({path:"/home"});var i={userReportedId:e,userReporterId:t,postId:n,commentId:r};fetch("https://localhost:3000/groupomania/report/admin/cancel/",{method:"DELETE",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)}),body:JSON.stringify(i)}).then(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,n.error){e.next=5;break}return e.abrupt("return",fetch("https://localhost:3000/groupomania/report/admin/"+o.$route.params.id,{headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)})}).then((function(e){return e.json()})).then((function(e){if(!e.error)return o.reports=e.report;o.$router.push({path:"/home"})})).catch((function(e){console.log(e)})));case 5:o.error=n.error;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}))}}};n("9865");B.render=g;t["default"]=B},cd4a:function(e,t,n){"use strict";n("0db7")},f85e:function(e,t,n){"use strict";var r=n("7a23"),o=n("e2f0"),i=n.n(o),c=Object(r["g"])("img",{id:"logo",src:i.a,alt:"logo de l'entreprise gropupomania"},null,-1),a={id:"nav"},u=Object(r["f"])("Accueil"),s=Object(r["f"])("Profil"),l=Object(r["g"])("i",{class:"gg-log-in"},null,-1);function d(e,t,n,o,i,d){var p=Object(r["v"])("router-link"),b=Object(r["v"])("router-view");return Object(r["p"])(),Object(r["d"])(r["a"],null,[Object(r["g"])("header",null,[c,Object(r["g"])("nav",a,[Object(r["g"])(p,{id:"item-nav-home",to:"/home",title:"Lien vers l'accueil"},{default:Object(r["B"])((function(){return[u]})),_:1}),Object(r["g"])(p,{id:"item-nav-profil",to:{name:"ProfilePage",params:{id:i.userId}},title:"Lien vers son profil"},{default:Object(r["B"])((function(){return[s]})),_:1},8,["to"]),Object(r["g"])(p,{id:"item-nav-logout",to:"/",title:"Bouton déconnexion"},{default:Object(r["B"])((function(){return[l]})),_:1})])]),Object(r["g"])(b)],64)}var p={name:"NavHome",data:function(){return{token:"",userId:"",isAdmin:""}},created:function(){var e=localStorage.getItem("user"),t=JSON.parse(e);if(null===t)return this.$router.push({path:"/"});this.token=t.token,this.userId=t.userId,this.isAdmin=t.isAdmin}};n("2785");p.render=d;t["a"]=p},fd2d:function(e,t,n){"use strict";var r=n("7a23"),o=Object(r["g"])("section",{id:"footer-profile"},[Object(r["g"])("a",{id:"mail-contact",href:"mailto:test@test.com",title:"Lien vers l'email d'aide"},"Un problème ?")],-1);function i(e,t){return Object(r["p"])(),Object(r["d"])("footer",null,[o])}n("cd4a");const c={};c.render=i;t["a"]=c}}]);
//# sourceMappingURL=chunk-72a1f45d.a1b57dbc.js.map