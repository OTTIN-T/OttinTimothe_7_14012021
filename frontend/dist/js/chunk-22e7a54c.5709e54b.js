(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22e7a54c"],{"0053":function(t,e,n){},"0db7":function(t,e,n){},"0f7f":function(t,e,n){"use strict";n.r(e);n("9911");var i=n("7a23"),r=Object(i["g"])("div",{id:"intro-update-post"},[Object(i["g"])("h1",{id:"title-update-post"},"Modifier votre post"),Object(i["g"])("p",{id:"text-update-post"},"Laisser libre cours à vos idées!")],-1),o=Object(i["g"])("i",{class:"gg-row-first"},null,-1),s=Object(i["g"])("i",{class:"gg-details-more"},null,-1),a=Object(i["g"])("i",{class:"gg-row-last"},null,-1),u={id:"succes"},c={id:"error"};function l(t,e,n,l,d,p){var b=this,f=Object(i["v"])("NavHome"),g=Object(i["v"])("ButtonUpdate"),m=Object(i["v"])("Footer");return Object(i["p"])(),Object(i["d"])(i["a"],null,[Object(i["g"])(f),Object(i["g"])("main",null,[Object(i["g"])("section",null,[r,Object(i["g"])("form",{id:"form-post",onSubmit:e[5]||(e[5]=Object(i["E"])((function(){}),["prevent"]))},[Object(i["g"])("label",{id:"title-label",for:"title",value:d.title},[o],8,["value"]),Object(i["C"])(Object(i["g"])("input",{id:"title-input",type:"text",maxlength:"100","onUpdate:modelValue":e[1]||(e[1]=function(t){return d.title=t}),required:"",autofocus:""},null,512),[[i["z"],d.title]]),Object(i["g"])("p",null,Object(i["x"])(d.title.length)+"/100",1),Object(i["g"])("label",{id:"message-label",for:"message",value:d.message},[s],8,["value"]),Object(i["C"])(Object(i["g"])("textarea",{rows:"10",cols:"25",maxlength:"255",id:"message-input","onUpdate:modelValue":e[2]||(e[2]=function(t){return d.message=t}),required:""},null,512),[[i["z"],d.message]]),Object(i["g"])("p",null,Object(i["x"])(d.message.length)+"/255",1),Object(i["g"])("label",{id:"link-label",for:"link",value:d.link},[a],8,["value"]),Object(i["C"])(Object(i["g"])("input",{id:"link-input",type:"url",maxlength:"255","onUpdate:modelValue":e[3]||(e[3]=function(t){return d.link=t}),placeholder:"Pas obligatoire"},null,512),[[i["z"],d.link]]),Object(i["g"])("p",null,Object(i["x"])(d.link.length)+"/255",1),d.message.length<=3?(Object(i["p"])(),Object(i["d"])(g,{key:0,id:"post-opacity-btn"})):d.userId==t.postUserId||!0===d.isAdmin?(Object(i["p"])(),Object(i["d"])(g,{key:1,title:"Bouton pour modifier un post",onUpdate:e[4]||(e[4]=function(t){return p.send(b.$route.params.id)})})):Object(i["e"])("",!0)],32),Object(i["g"])("p",u,Object(i["x"])(d.postSucces),1),Object(i["g"])("p",c,Object(i["x"])(d.error),1)])]),Object(i["g"])(m)],64)}n("d3b7"),n("498a"),n("96cf");var d=n("1da1"),p=n("f85e"),b=n("39b8"),f=n("fd2d"),g={name:"PostUpdate",components:{NavHome:p["a"],ButtonUpdate:b["a"],Footer:f["a"]},data:function(){return{title:"",message:"",link:"",token:"",userId:"",isAdmin:"",postId:"",postSucces:"",error:""}},created:function(){var t=this,e=localStorage.getItem("user"),n=JSON.parse(e);if(null===n)return this.$router.push({path:"/"});this.token=n.token,this.userId=n.userId,this.isAdmin=n.isAdmin,fetch("https//localhost:3000/groupomania/post/"+this.$route.params.id,{headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)})}).then((function(t){return t.json()})).then((function(e){if(e.error)return t.$router.push({path:"/"});t.postId=e.post.id,t.postUserId=e.post.UserId,t.title=e.post.title,t.message=e.post.message,t.link=e.post.link,t.messagePost=e.message})).catch((function(t){console.log(t)}))},methods:{send:function(t){var e=this;if(null===this.token)return this.$router.push({path:"/"});if(this.postUserId!=this.userId&&1!=this.isAdmin)return this.$router.push({path:"/home"});var n={title:this.title.trim(),message:this.message.trim(),link:this.link.trim()};fetch("https//localhost:3000/groupomania/post/"+t,{method:"PUT",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)}),body:JSON.stringify(n)}).then(function(){var n=Object(d["a"])(regeneratorRuntime.mark((function n(i){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,i.json();case 2:if(r=n.sent,r.error){n.next=6;break}return e.postSucces="Post modifié !",n.abrupt("return",e.$router.push({name:"PostUnique",params:t}));case 6:e.error=r.error;case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).catch((function(t){console.log(t)}))}}};n("7b85");g.render=l;e["default"]=g},2785:function(t,e,n){"use strict";n("8227")},"39b8":function(t,e,n){"use strict";var i=n("7a23"),r={id:"update-div"},o=Object(i["g"])("i",{class:"gg-pen"},null,-1);function s(t,e,n,s,a,u){return Object(i["p"])(),Object(i["d"])("div",r,[o,Object(i["g"])("button",{id:"update-btn",onClick:e[1]||(e[1]=function(){return u.update&&u.update.apply(u,arguments)})},"Modifier")])}var a={name:"ButtonUpdate",methods:{update:function(){this.$emit("update")}}};n("67e6");a.render=s;e["a"]=a},"67e6":function(t,e,n){"use strict";n("6b26")},"6b26":function(t,e,n){},"7b85":function(t,e,n){"use strict";n("0053")},8227:function(t,e,n){},"857a":function(t,e,n){var i=n("1d80"),r=/"/g;t.exports=function(t,e,n,o){var s=String(i(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(o).replace(r,"&quot;")+'"'),a+">"+s+"</"+e+">"}},9911:function(t,e,n){"use strict";var i=n("23e7"),r=n("857a"),o=n("af03");i({target:"String",proto:!0,forced:o("link")},{link:function(t){return r(this,"a","href",t)}})},af03:function(t,e,n){var i=n("d039");t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},cd4a:function(t,e,n){"use strict";n("0db7")},f85e:function(t,e,n){"use strict";var i=n("7a23"),r=n("e2f0"),o=n.n(r),s=Object(i["g"])("img",{id:"logo",src:o.a,alt:"logo de l'entreprise gropupomania"},null,-1),a={id:"nav"},u=Object(i["f"])("Accueil"),c=Object(i["f"])("Profil"),l=Object(i["g"])("i",{class:"gg-log-in"},null,-1);function d(t,e,n,r,o,d){var p=Object(i["v"])("router-link"),b=Object(i["v"])("router-view");return Object(i["p"])(),Object(i["d"])(i["a"],null,[Object(i["g"])("header",null,[s,Object(i["g"])("nav",a,[Object(i["g"])(p,{id:"item-nav-home",to:"/home",title:"Lien vers l'accueil"},{default:Object(i["B"])((function(){return[u]})),_:1}),Object(i["g"])(p,{id:"item-nav-profil",to:{name:"ProfilePage",params:{id:o.userId}},title:"Lien vers son profil"},{default:Object(i["B"])((function(){return[c]})),_:1},8,["to"]),Object(i["g"])(p,{id:"item-nav-logout",to:"/",title:"Bouton déconnexion"},{default:Object(i["B"])((function(){return[l]})),_:1})])]),Object(i["g"])(b)],64)}var p={name:"NavHome",data:function(){return{token:"",userId:"",isAdmin:""}},created:function(){var t=localStorage.getItem("user"),e=JSON.parse(t);if(null===e)return this.$router.push({path:"/"});this.token=e.token,this.userId=e.userId,this.isAdmin=e.isAdmin}};n("2785");p.render=d;e["a"]=p},fd2d:function(t,e,n){"use strict";var i=n("7a23"),r=Object(i["g"])("section",{id:"footer-profile"},[Object(i["g"])("a",{id:"mail-contact",href:"mailto:test@test.com",title:"Lien vers l'email d'aide"},"Un problème ?")],-1);function o(t,e){return Object(i["p"])(),Object(i["d"])("footer",null,[r])}n("cd4a");const s={};s.render=o;e["a"]=s}}]);
//# sourceMappingURL=chunk-22e7a54c.5709e54b.js.map