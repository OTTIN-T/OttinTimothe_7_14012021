(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08555e0d"],{"0db7":function(t,e,n){},"0f7f":function(t,e,n){"use strict";n.r(e);n("9911");var r=n("7a23"),i=Object(r["g"])("div",{id:"intro-update-post"},[Object(r["g"])("h1",{id:"title-update-post"},"Modifier votre post"),Object(r["g"])("p",{id:"text-update-post"},"Laisser libre cours à vos idées!")],-1),o=Object(r["g"])("i",{class:"gg-row-first"},null,-1),a=Object(r["g"])("i",{class:"gg-details-more"},null,-1),s=Object(r["g"])("i",{class:"gg-row-last"},null,-1),u={id:"succes"},c={id:"error"};function l(t,e,n,l,d,p){var f=this,g=Object(r["v"])("NavHome"),b=Object(r["v"])("ButtonUpdate"),m=Object(r["v"])("Footer");return Object(r["p"])(),Object(r["d"])(r["a"],null,[Object(r["g"])(g),Object(r["g"])("main",null,[Object(r["g"])("section",null,[i,Object(r["g"])("form",{id:"form-post",onSubmit:e[5]||(e[5]=Object(r["E"])((function(){}),["prevent"]))},[Object(r["g"])("label",{id:"title-label",for:"title",value:d.title},[o],8,["value"]),Object(r["C"])(Object(r["g"])("input",{id:"title-input",type:"text",maxlength:"100","onUpdate:modelValue":e[1]||(e[1]=function(t){return d.title=t}),required:"",autofocus:""},null,512),[[r["z"],d.title]]),Object(r["g"])("p",null,Object(r["x"])(d.title.length)+"/100",1),Object(r["g"])("label",{id:"message-label",for:"message",value:d.message},[a],8,["value"]),Object(r["C"])(Object(r["g"])("textarea",{rows:"10",cols:"25",maxlength:"255",id:"message-input","onUpdate:modelValue":e[2]||(e[2]=function(t){return d.message=t}),required:""},null,512),[[r["z"],d.message]]),Object(r["g"])("p",null,Object(r["x"])(d.message.length)+"/255",1),Object(r["g"])("label",{id:"link-label",for:"link",value:d.link},[s],8,["value"]),Object(r["C"])(Object(r["g"])("input",{id:"link-input",type:"url",maxlength:"255","onUpdate:modelValue":e[3]||(e[3]=function(t){return d.link=t}),placeholder:"Pas obligatoire"},null,512),[[r["z"],d.link]]),Object(r["g"])("p",null,Object(r["x"])(d.link.length)+"/255",1),d.message.length<=3?(Object(r["p"])(),Object(r["d"])(b,{key:0,id:"post-opacity-btn"})):d.userId==t.postUserId||!0===d.isAdmin?(Object(r["p"])(),Object(r["d"])(b,{key:1,title:"Bouton pour modifier un post",onUpdate:e[4]||(e[4]=function(t){return p.send(f.$route.params.id)})})):Object(r["e"])("",!0)],32),Object(r["g"])("p",u,Object(r["x"])(d.postSucces),1),Object(r["g"])("p",c,Object(r["x"])(d.error),1)])]),Object(r["g"])(m)],64)}n("d3b7"),n("498a"),n("96cf");var d=n("1da1"),p=n("f85e"),f=n("39b8"),g=n("fd2d"),b={name:"PostUpdate",components:{NavHome:p["a"],ButtonUpdate:f["a"],Footer:g["a"]},data:function(){return{title:"",message:"",link:"",token:"",userId:"",isAdmin:"",postId:"",postSucces:"",error:""}},created:function(){var t=this,e=localStorage.getItem("user"),n=JSON.parse(e);if(null===n)return this.$router.push({path:"/"});this.token=n.token,this.userId=n.userId,this.isAdmin=n.isAdmin,fetch("https://localhost:3000/groupomania/post/"+this.$route.params.id,{headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)})}).then((function(t){return t.json()})).then((function(e){if(e.error)return t.$router.push({path:"/"});t.postId=e.post.id,t.postUserId=e.post.UserId,t.title=e.post.title,t.message=e.post.message,t.link=e.post.link,t.messagePost=e.message})).catch((function(t){console.log(t)}))},methods:{send:function(t){var e=this;if(null===this.token)return this.$router.push({path:"/"});if(this.postUserId!=this.userId&&1!=this.isAdmin)return this.$router.push({path:"/home"});var n={title:this.title.trim(),message:this.message.trim(),link:this.link.trim()};fetch("https://localhost:3000/groupomania/post/"+t,{method:"PUT",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)}),body:JSON.stringify(n)}).then(function(){var n=Object(d["a"])(regeneratorRuntime.mark((function n(r){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.json();case 2:if(i=n.sent,i.error){n.next=6;break}return e.postSucces="Post modifié !",n.abrupt("return",e.$router.push({name:"PostUnique",params:t}));case 6:e.error=i.error;case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).catch((function(t){console.log(t)}))}}};n("deee");b.render=l;e["default"]=b},2785:function(t,e,n){"use strict";n("8227")},"39b8":function(t,e,n){"use strict";var r=n("7a23"),i={id:"update-div"},o=Object(r["g"])("i",{class:"gg-pen"},null,-1);function a(t,e,n,a,s,u){return Object(r["p"])(),Object(r["d"])("div",i,[o,Object(r["g"])("button",{id:"update-btn",onClick:e[1]||(e[1]=function(){return u.update&&u.update.apply(u,arguments)})},"Modifier")])}var s={name:"ButtonUpdate",methods:{update:function(){this.$emit("update")}}};n("67e6");s.render=a;e["a"]=s},"67e6":function(t,e,n){"use strict";n("6b26")},"6b26":function(t,e,n){},8227:function(t,e,n){},"857a":function(t,e,n){var r=n("1d80"),i=/"/g;t.exports=function(t,e,n,o){var a=String(r(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(o).replace(i,"&quot;")+'"'),s+">"+a+"</"+e+">"}},9911:function(t,e,n){"use strict";var r=n("23e7"),i=n("857a"),o=n("af03");r({target:"String",proto:!0,forced:o("link")},{link:function(t){return i(this,"a","href",t)}})},af03:function(t,e,n){var r=n("d039");t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},cd4a:function(t,e,n){"use strict";n("0db7")},deee:function(t,e,n){"use strict";n("e67f")},e67f:function(t,e,n){},f85e:function(t,e,n){"use strict";var r=n("7a23"),i=n("e2f0"),o=n.n(i),a=Object(r["g"])("img",{id:"logo",src:o.a,alt:"logo de l'entreprise gropupomania"},null,-1),s={id:"nav"},u=Object(r["f"])("Accueil"),c=Object(r["f"])("Profil"),l=Object(r["g"])("i",{class:"gg-log-in"},null,-1);function d(t,e,n,i,o,d){var p=Object(r["v"])("router-link"),f=Object(r["v"])("router-view");return Object(r["p"])(),Object(r["d"])(r["a"],null,[Object(r["g"])("header",null,[a,Object(r["g"])("nav",s,[Object(r["g"])(p,{id:"item-nav-home",to:"/home",title:"Lien vers l'accueil"},{default:Object(r["B"])((function(){return[u]})),_:1}),Object(r["g"])(p,{id:"item-nav-profil",to:{name:"ProfilePage",params:{id:o.userId}},title:"Lien vers son profil"},{default:Object(r["B"])((function(){return[c]})),_:1},8,["to"]),Object(r["g"])(p,{id:"item-nav-logout",to:"/",title:"Bouton déconnexion"},{default:Object(r["B"])((function(){return[l]})),_:1})])]),Object(r["g"])(f)],64)}var p={name:"NavHome",data:function(){return{token:"",userId:"",isAdmin:""}},created:function(){var t=localStorage.getItem("user"),e=JSON.parse(t);if(null===e)return this.$router.push({path:"/"});this.token=e.token,this.userId=e.userId,this.isAdmin=e.isAdmin}};n("2785");p.render=d;e["a"]=p},fd2d:function(t,e,n){"use strict";var r=n("7a23"),i=Object(r["g"])("section",{id:"footer-profile"},[Object(r["g"])("a",{id:"mail-contact",href:"mailto:test@test.com",title:"Lien vers l'email d'aide"},"Un problème ?")],-1);function o(t,e){return Object(r["p"])(),Object(r["d"])("footer",null,[i])}n("cd4a");const a={};a.render=o;e["a"]=a}}]);
//# sourceMappingURL=chunk-08555e0d.081ded5b.js.map