(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b8c60556"],{"0db7":function(t,e,n){},2785:function(t,e,n){"use strict";n("8227")},"39b8":function(t,e,n){"use strict";var o=n("7a23"),r={id:"update-div"},i=Object(o["g"])("i",{class:"gg-pen"},null,-1);function c(t,e,n,c,u,a){return Object(o["p"])(),Object(o["d"])("div",r,[i,Object(o["g"])("button",{id:"update-btn",onClick:e[1]||(e[1]=function(){return a.update&&a.update.apply(a,arguments)})},"Modifier")])}var u={name:"ButtonUpdate",methods:{update:function(){this.$emit("update")}}};n("67e6");u.render=c;e["a"]=u},5391:function(t,e,n){"use strict";n("bb61")},"67e6":function(t,e,n){"use strict";n("6b26")},"6b26":function(t,e,n){},8227:function(t,e,n){},9790:function(t,e,n){"use strict";n.r(e);var o=n("7a23"),r=Object(o["g"])("div",{id:"intro-comment-post"},[Object(o["g"])("h1",{id:"title-comment-post"},"Votre commentaire:")],-1),i=Object(o["f"])(" > "),c={id:"succes"},u={id:"error"};function a(t,e,n,a,m,s){var d=Object(o["v"])("NavHome"),p=Object(o["v"])("ButtonUpdate"),l=Object(o["v"])("Footer");return Object(o["p"])(),Object(o["d"])(o["a"],null,[Object(o["g"])(d),Object(o["g"])("main",null,[Object(o["g"])("section",null,[r,Object(o["g"])("form",{action:"",method:"post",id:"form-post",onSubmit:e[3]||(e[3]=Object(o["E"])((function(){}),["prevent"]))},[Object(o["g"])("label",{id:"message-label",for:"comment",value:m.comment},null,8,["value"]),Object(o["C"])(Object(o["g"])("textarea",{rows:"10",cols:"25",id:"comment-input","onUpdate:modelValue":e[1]||(e[1]=function(t){return m.comment=t}),required:""},null,512),[[o["z"],m.comment]]),Object(o["g"])("p",null,Object(o["x"])(m.comment.length)+"/255",1),m.comment.length<=2?(Object(o["p"])(),Object(o["d"])(p,{key:0,id:"comment-update-opacity-btn",title:"Bouton pour mofifier un commentaire"})):m.userId===m.userIdComment||!0===m.isAdmin?(Object(o["p"])(),Object(o["d"])(p,{key:1,onUpdate:e[2]||(e[2]=function(t){return s.updateComment(m.commentId)}),title:"Bouton pour mofifier un commentaire"},{default:Object(o["B"])((function(){return[i]})),_:1})):Object(o["e"])("",!0)],32),Object(o["g"])("p",c,Object(o["x"])(m.commmentSucces),1),Object(o["g"])("p",u,Object(o["x"])(m.error),1)])]),Object(o["g"])(l)],64)}n("d3b7"),n("498a"),n("96cf");var m=n("1da1"),s=n("f85e"),d=n("39b8"),p=n("fd2d"),l={name:"CommentCreate",components:{NavHome:s["a"],ButtonUpdate:d["a"],Footer:p["a"]},data:function(){return{comment:"",token:"",userId:"",isAdmin:"",commentId:"",userIdComment:"",postId:"",commmentSucces:"",error:""}},created:function(){var t=this,e=localStorage.getItem("user"),n=JSON.parse(e);if(null===n)return this.$router.push({path:"/"});this.token=n.token,this.userId=n.userId,this.isAdmin=n.isAdmin,fetch("https://localhost:3000/groupomania/comment/"+this.$route.params.id,{headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)})}).then((function(t){return t.json()})).then((function(e){if(e.error)return t.$router.push({path:"/"});t.comment=e.comment.comment,t.commentId=e.comment.id,t.userIdComment=e.comment.UserId,t.postId=e.comment.PostId})).catch((function(t){console.log(t)}))},methods:{updateComment:function(t){var e=this;if(null===this.token)return this.$router.push({path:"/"});if(this.userIdComment!=this.userId&&1!=this.isAdmin)return this.$router.push({path:"/home"});var n={message:this.comment.trim()};fetch("https://localhost:3000/groupomania/comment/"+t,{method:"PUT",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer ".concat(this.token)}),body:JSON.stringify(n)}).then(function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(n){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:if(o=t.sent,o.error){t.next=7;break}return e.$route.params.id=e.postId,e.commmentSucces="Commentaire modifié !",t.abrupt("return",e.$router.push({name:"PostUnique",params:e.$route.params.id}));case 7:e.error=o.error;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.log(t)}))}}};n("5391");l.render=a;e["default"]=l},bb61:function(t,e,n){},cd4a:function(t,e,n){"use strict";n("0db7")},f85e:function(t,e,n){"use strict";var o=n("7a23"),r=n("e2f0"),i=n.n(r),c=Object(o["g"])("img",{id:"logo",src:i.a,alt:"logo de l'entreprise gropupomania"},null,-1),u={id:"nav"},a=Object(o["f"])("Accueil"),m=Object(o["f"])("Profil"),s=Object(o["g"])("i",{class:"gg-log-in"},null,-1);function d(t,e,n,r,i,d){var p=Object(o["v"])("router-link"),l=Object(o["v"])("router-view");return Object(o["p"])(),Object(o["d"])(o["a"],null,[Object(o["g"])("header",null,[c,Object(o["g"])("nav",u,[Object(o["g"])(p,{id:"item-nav-home",to:"/home",title:"Lien vers l'accueil"},{default:Object(o["B"])((function(){return[a]})),_:1}),Object(o["g"])(p,{id:"item-nav-profil",to:{name:"ProfilePage",params:{id:i.userId}},title:"Lien vers son profil"},{default:Object(o["B"])((function(){return[m]})),_:1},8,["to"]),Object(o["g"])(p,{id:"item-nav-logout",to:"/",title:"Bouton déconnexion"},{default:Object(o["B"])((function(){return[s]})),_:1})])]),Object(o["g"])(l)],64)}var p={name:"NavHome",data:function(){return{token:"",userId:"",isAdmin:""}},created:function(){var t=localStorage.getItem("user"),e=JSON.parse(t);if(null===e)return this.$router.push({path:"/"});this.token=e.token,this.userId=e.userId,this.isAdmin=e.isAdmin}};n("2785");p.render=d;e["a"]=p},fd2d:function(t,e,n){"use strict";var o=n("7a23"),r=Object(o["g"])("section",{id:"footer-profile"},[Object(o["g"])("a",{id:"mail-contact",href:"mailto:test@test.com",title:"Lien vers l'email d'aide"},"Un problème ?")],-1);function i(t,e){return Object(o["p"])(),Object(o["d"])("footer",null,[r])}n("cd4a");const c={};c.render=i;e["a"]=c}}]);
//# sourceMappingURL=chunk-b8c60556.1fa82dd4.js.map